{"mappings":"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","sources":["lib/index.ts","lib/Firestarter.tsx","lib/Auth.tsx","lib/Firestore.tsx","lib/Store.tsx","lib/cx.ts","lib/firebase.ts","lib/auth/login.ts","lib/auth/logout.ts","lib/auth/verify.ts","lib/firestore/useDocumentSnapshot.ts","lib/firestore/useMemoState.ts","lib/firestore/useQuerySnapshot.ts"],"sourcesContent":["export { default as Firestarter } from './Firestarter';\nexport { default as cx } from './cx';\n\nexport { getFirebase } from './firebase';\n\nexport {\n  StoreProvider,\n  useStore,\n  // Subscribers\n  useLocalState,\n  usePageState,\n  useSessionState,\n  // Store Setter\n  useLocalSetter,\n  usePageSetter,\n  useSessionSetter,\n  // Store Getter\n  useLocalGetter,\n  usePageGetter,\n  useSessionGetter,\n  // Key Set\n  useLocalSet,\n  usePageSet,\n  useSessionSet,\n  // Key Get\n  useLocalGet,\n  usePageGet,\n  useSessionGet,\n  //\n  emitters as storeEmitters,\n} from './Store';\n\nexport { AuthProvider, useAuth, updateUserProfile } from './Auth';\nexport { useLogin, FirestarterLoginStatus } from './auth/login';\nexport { useLogout, FirestarterLogoutStatus } from './auth/logout';\nexport { useVerify, FirestarterVerifyStatus } from './auth/verify';\n\nexport { FirestoreProvider, useFirestore } from './Firestore';\n\nexport { default as useDocumentSnapshot } from './firestore/useDocumentSnapshot';\nexport { default as useQuerySnapshot } from './firestore/useQuerySnapshot';\nexport { default as useMemoState } from './firestore/useMemoState';\n","import { FirebaseApp } from 'firebase/app';\nimport { Auth } from 'firebase/auth';\nimport { Firestore } from 'firebase/firestore';\nimport { Functions } from 'firebase/functions';\nimport { FirebaseStorage } from 'firebase/storage';\nimport { ReactNode } from 'react';\nimport { AuthProvider, FirestarterAuthSettings } from './Auth';\nimport { FirestoreProvider } from './Firestore';\nimport { StoreProvider } from './Store';\n\ntype FirestarterFirebase = {\n  app: FirebaseApp;\n  firestore?: Firestore;\n  auth?: Auth;\n  storage?: FirebaseStorage;\n  functions?: Functions;\n};\n\n/**\n * A wrapper for the other providers.\n */\nexport default function Firestarter({\n  defaultStore,\n  firebase,\n  settings,\n  children,\n}: {\n  defaultStore?: any;\n  firebase: FirestarterFirebase;\n  settings?: { auth?: FirestarterAuthSettings };\n  children: ReactNode;\n}) {\n  const { app, auth, firestore } = firebase;\n\n  let wrapped = children;\n\n  if (firestore) {\n    wrapped = <FirestoreProvider firestore={firestore}>{wrapped}</FirestoreProvider>;\n  }\n  if (auth) {\n    wrapped = (\n      <AuthProvider auth={auth} settings={settings?.auth}>\n        {wrapped}\n      </AuthProvider>\n    );\n  }\n\n  return (\n    <StoreProvider namespace={app.name || 'firestarter'} defaultValues={defaultStore}>\n      {wrapped}\n    </StoreProvider>\n  );\n}\n","import mitt from 'mitt';\nimport { createContext, ReactNode, useContext } from 'react';\nimport { useEffect, useState } from 'react';\nimport { Auth, onAuthStateChanged, updateProfile, User } from 'firebase/auth';\nimport deepEqual from 'fast-deep-equal/es6/react';\nimport { UrlObject } from 'url';\ntype Url = string | UrlObject;\n\nexport type FirestarterAuthSettings = {\n  loginPath?: Url;\n  logoutPath?: Url;\n  verifyPath?: Url;\n  actionPath?: Url;\n  homePath?: Url;\n  userPath?: Url;\n};\n\nexport type FirestarterAuthType = {\n  currentUser: User | null;\n  connected: boolean;\n  auth: Auth | null;\n  settings: FirestarterAuthSettings;\n};\n\nexport type FirestarterProfileType = {\n  displayName?: string | null | undefined;\n  photoURL?: string | null | undefined;\n};\n\nexport const defaultAuthSettings = {\n  homePath: '/',\n  loginPath: '/login',\n  logoutPath: '/logout',\n  verifyPath: '/verify',\n  actionPath: '/action',\n  userPath: '/user',\n};\n\ntype FirestarterProfileEvent = {\n  authProfileUpdate: User;\n};\n\nconst AuthContext = createContext<FirestarterAuthType>({ currentUser: null, connected: false, auth: null, settings: defaultAuthSettings });\n\nconst emitter = mitt<FirestarterProfileEvent>();\n\nexport function AuthProvider({ auth, settings, children }: { auth: Auth; settings?: FirestarterAuthSettings; children: ReactNode }) {\n  const [currentUser, setCurrentUser] = useState(auth.currentUser);\n  const [connected, setConnected] = useState(Boolean(auth.currentUser));\n  const [update, setUpdate] = useState({});\n  function forceUpdate() {\n    setUpdate({});\n  }\n\n  useEffect(() => {\n    const unsubscribeAuth = onAuthStateChanged(auth, (user) => {\n      setCurrentUser((currentUser) => {\n        // React will not re-render if the setState is the same object\n        // So deep check if the user from auth subscription is the same to prevent re-render\n        if (!deepEqual(currentUser, user)) {\n          return user;\n        } else {\n          return currentUser;\n        }\n      });\n\n      setConnected(true);\n    });\n    return unsubscribeAuth;\n  }, [auth]);\n\n  useEffect(() => {\n    function onProfileUpdate(user: User) {\n      // Firebase does not mutate user on profile updates so force an update\n      if (user === currentUser) {\n        forceUpdate();\n      }\n    }\n\n    emitter.on('authProfileUpdate', onProfileUpdate);\n\n    return () => {\n      emitter.off('authProfileUpdate', onProfileUpdate);\n    };\n  }, [currentUser]);\n\n  const value = { auth, currentUser: currentUser, connected, settings: { ...defaultAuthSettings, ...settings } };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport const AuthConsumer = AuthContext.Consumer;\n\nexport function useAuth() {\n  return useContext<FirestarterAuthType>(AuthContext);\n}\n\n/**\n * Update the user's profile and emit an event to all subscribers\n */\nexport function updateUserProfile(user: User, profile: FirestarterProfileType) {\n  updateProfile(user, profile)\n    .then(() => {\n      emitter.emit('authProfileUpdate', user);\n    })\n    .catch((error) => {\n      throw error;\n    });\n}\n","import { createContext, ReactNode, useContext } from 'react';\nimport { Firestore } from 'firebase/firestore';\n\nconst FirestoreContext = createContext<Firestore>(null as unknown as Firestore);\n\nexport function FirestoreProvider({ firestore, children }: { firestore: Firestore; children: ReactNode }) {\n  if (!firestore) {\n    throw new Error('FirestoreProvider requires a Firestore instance');\n  }\n  return <FirestoreContext.Provider value={firestore}>{children}</FirestoreContext.Provider>;\n}\n\nexport const FirestoreConsumer = FirestoreContext.Consumer;\n\nexport function useFirestore() {\n  return useContext<Firestore>(FirestoreContext);\n}\n","import mitt from 'mitt';\nimport { createContext, ReactNode, useCallback, useContext } from 'react';\nimport { useEffect, useState } from 'react';\nimport store2, { StoreType } from 'store2';\n\nexport type FirestarterStoreType = {\n  store: StoreType;\n  defaultValues?: { [key: string]: any };\n};\n\nconst StoreContext = createContext<FirestarterStoreType>({ store: store2, defaultValues: {} });\n\nexport function StoreProvider({\n  namespace = 'firestarter',\n  defaultValues = {},\n  children,\n}: {\n  namespace?: string;\n  defaultValues?: object;\n  children: ReactNode;\n}) {\n  console.info('Connect Store: ' + namespace);\n  const store = store2.namespace(namespace);\n  const value = { store, defaultValues };\n  return <StoreContext.Provider value={value}>{children}</StoreContext.Provider>;\n}\n\nexport const StoreConsumer = StoreContext.Consumer;\n\nexport function useStore() {\n  return useContext<FirestarterStoreType>(StoreContext);\n}\n\n// Emitters\nexport const emitters = {\n  local: mitt(),\n  session: mitt(),\n  page: mitt(),\n};\n\nfunction useStoreState(location: 'local' | 'session' | 'page', key: string, defaultValue?: any): [any, Function, boolean] {\n  const { store, defaultValues } = useStore();\n\n  const [value, setValue] = useState(defaultValue || (defaultValues && defaultValues[key]));\n  const [loaded, setLoaded] = useState(false);\n\n  function set(value: any) {\n    store[location].set(key, value);\n    emitters[location].emit(key, value);\n  }\n\n  useEffect(() => {\n    // Must set the value in an effect else the server will never match the client on the 1st render\n    setValue(store[location].get(key, defaultValue || (defaultValues && defaultValues[key])));\n\n    // You can use the loaded state if you need to wait for the store data\n    setLoaded(true);\n  }, [defaultValue, defaultValues, key, location, store]);\n\n  useEffect(() => {\n    function onValueUpdate() {\n      setValue(store.get(key, defaultValue));\n    }\n\n    emitters[location].on(key, onValueUpdate);\n\n    return () => {\n      emitters[location].off(key, onValueUpdate);\n    };\n  }, [defaultValue, key, location, store]);\n\n  return [value, set, loaded];\n}\n\nfunction useStoreSetter(location: 'local' | 'session' | 'page') {\n  const { store } = useStore();\n\n  function set(key: string, value: any) {\n    store[location].set(key, value);\n    emitters[location].emit(key, value);\n  }\n\n  return useCallback(set, [location, store]);\n}\n\nfunction useStoreGetter(location: 'local' | 'session' | 'page') {\n  const { store } = useStore();\n\n  function get(key: string) {\n    return store[location].get(key);\n  }\n\n  return useCallback(get, [location, store]);\n}\n\nfunction useStoreSet(location: 'local' | 'session' | 'page', key: string) {\n  const { store } = useStore();\n\n  function set(value: any) {\n    store[location].set(key, value);\n    emitters[location].emit(key, value);\n  }\n\n  return useCallback(set, [key, location, store]);\n}\n\nfunction useStoreGet(location: 'local' | 'session' | 'page', key: string) {\n  const { store } = useStore();\n\n  function get() {\n    return store[location].get(key);\n  }\n\n  return useCallback(get, [key, location, store]);\n}\n\nexport function useLocalState(key: string, defaultValue?: any): [any, Function, boolean] {\n  return useStoreState('local', key, defaultValue);\n}\n\nexport function useSessionState(key: string, defaultValue?: any): [any, Function, boolean] {\n  return useStoreState('session', key, defaultValue);\n}\n\nexport function usePageState(key: string, defaultValue?: any): [any, Function, boolean] {\n  return useStoreState('page', key, defaultValue);\n}\n\nexport function useLocalSetter() {\n  return useStoreSetter('local');\n}\n\nexport function useSessionSetter() {\n  return useStoreSetter('session');\n}\n\nexport function usePageSetter() {\n  return useStoreSetter('page');\n}\n\nexport function useLocalGetter() {\n  return useStoreGetter('local');\n}\n\nexport function useSessionGetter() {\n  return useStoreGetter('session');\n}\n\nexport function usePageGetter() {\n  return useStoreGetter('page');\n}\n\nexport function useLocalSet(key: string) {\n  return useStoreSet('local', key);\n}\n\nexport function useSessionSet(key: string) {\n  return useStoreSet('session', key);\n}\n\nexport function usePageSet(key: string) {\n  return useStoreSet('page', key);\n}\n\nexport function useLocalGet(key: string) {\n  return useStoreGet('local', key);\n}\n\nexport function useSessionGet(key: string) {\n  return useStoreGet('session', key);\n}\n\nexport function usePageGet(key: string) {\n  return useStoreGet('page', key);\n}\n","import clsx from 'clsx';\nexport default clsx;\n","// Connect or Initialize Firebase in a way that does not break when hot-reloaded\nimport { initializeApp, getApp, FirebaseApp } from 'firebase/app';\nimport { getFirestore, connectFirestoreEmulator, Firestore } from 'firebase/firestore';\nimport { getAuth, connectAuthEmulator, Auth } from 'firebase/auth';\nimport { getStorage, connectStorageEmulator, FirebaseStorage } from 'firebase/storage';\nimport { getFunctions, connectFunctionsEmulator, Functions } from 'firebase/functions';\n\nlet app: FirebaseApp, firestore: Firestore, auth: Auth, storage: FirebaseStorage, functions: Functions;\n\nexport function getFirebase(config: any, emulators?: any) {\n  try {\n    // This will throw an error if app is not initialized\n    app = getApp(config.projectId || 'firestarter');\n    firestore = getFirestore(app);\n    auth = getAuth(app);\n    storage = getStorage(app);\n    functions = getFunctions(app);\n\n    console.log('Firebase Connected');\n  } catch (_) {\n    // Initialize Firebase once to prevent errors\n    app = initializeApp(config, config.projectId || 'firestarter');\n    firestore = getFirestore(app);\n    auth = getAuth(app);\n    storage = getStorage(app);\n    functions = getFunctions(app);\n\n    console.log('Firebase Initialized');\n\n    if (emulators) {\n      emulators.firestore && connectFirestoreEmulator(firestore, emulators.firestore.host || 'localhost', emulators.firestore.port || 8080);\n      emulators.auth && connectAuthEmulator(auth, `http://${emulators.auth.host || 'localhost'}:${emulators.auth.port || 9099}`);\n      emulators.storage && connectStorageEmulator(storage, emulators.storage.host || 'localhost', emulators.storage.port || 9199);\n      emulators.functions && connectFunctionsEmulator(functions, emulators.functions.host || 'localhost', emulators.functions.port || 5001);\n      console.log('Firebase Emulation is enabled');\n    }\n  }\n  return { app, firestore, auth, storage, functions };\n}\n","import { sendSignInLinkToEmail, User } from 'firebase/auth';\nimport { FormEventHandler, useEffect, useState } from 'react';\nimport { useAuth, defaultAuthSettings } from '../Auth';\nimport { SubmitHandler, useForm } from 'react-hook-form';\nimport { useRouter } from 'next/router';\nimport { useLocalSet } from '../Store';\n\nexport enum FirestarterLoginStatus {\n  Connecting,\n  Inputing,\n  Submitting,\n  Waiting,\n  Redirecting,\n}\n\nexport type FirestarterLoginState = {\n  status: FirestarterLoginStatus;\n  errors: any;\n  currentUser: User | null;\n  registerEmail: any;\n  submitHandler: FormEventHandler<HTMLFormElement>;\n  watchEmail: string;\n  stopWaiting: () => void;\n};\n\nexport type FirestarterLoginInputs = {\n  email: string;\n};\n\nexport function useLogin(): FirestarterLoginState {\n  const router = useRouter();\n  const { currentUser, connected, settings, auth } = useAuth();\n  const [waiting, setWaiting] = useState(false);\n  const setEmailForLogin = useLocalSet('emailForLogin');\n\n  const {\n    register,\n    handleSubmit,\n    watch,\n    setError,\n    formState: { errors, isSubmitting },\n  } = useForm<FirestarterLoginInputs>();\n\n  const onSubmit: SubmitHandler<FirestarterLoginInputs> = async ({ email }) => {\n    try {\n      if (auth) {\n        await sendSignInLinkToEmail(auth, email, {\n          url: `${location.origin}${settings.verifyPath}?redirect=${encodeURIComponent(String(router.query.redirect || settings.userPath))}`,\n          handleCodeInApp: true,\n        });\n        setWaiting(true);\n        // Save the email locally so you don't need to ask the user for it again if they open the link on the same device.\n        setEmailForLogin(email);\n      }\n    } catch (error) {\n      console.error(error);\n      setError('email', { type: 'login.failed', message: 'There was an error, check your email and try again.' });\n    }\n  };\n\n  // If user is authenticated, redirect to the user page\n  useEffect(() => {\n    if (currentUser) {\n      router.replace(settings.userPath || defaultAuthSettings.userPath);\n    }\n  }, [currentUser, router, settings.userPath]);\n\n  // Calculate status depending on other states\n  const status = !connected\n    ? FirestarterLoginStatus.Connecting\n    : currentUser\n    ? FirestarterLoginStatus.Redirecting\n    : waiting\n    ? FirestarterLoginStatus.Waiting\n    : isSubmitting\n    ? FirestarterLoginStatus.Submitting\n    : FirestarterLoginStatus.Inputing;\n\n  return {\n    status,\n    errors,\n    currentUser,\n    registerEmail: register('email', { required: 'Required' }),\n    submitHandler: handleSubmit(onSubmit),\n    watchEmail: watch('email'),\n    stopWaiting: () => setWaiting(false),\n  };\n}\n","import { signOut } from 'firebase/auth';\nimport { useRouter } from 'next/router';\nimport { useEffect } from 'react';\nimport { useAuth, defaultAuthSettings } from '../Auth';\n\nexport enum FirestarterLogoutStatus {\n  Connecting,\n  Redirecting,\n}\n\nexport function useLogout() {\n  const { auth, currentUser, settings, connected } = useAuth();\n  const router = useRouter();\n\n  useEffect(() => {\n    if (auth) {\n      signOut(auth);\n    }\n  }, [auth]);\n\n  useEffect(() => {\n    if (connected && !currentUser) {\n      router.replace(settings.homePath || defaultAuthSettings.homePath);\n    }\n  }, [connected, currentUser, router, settings.homePath]);\n\n  return connected ? FirestarterLogoutStatus.Redirecting : FirestarterLogoutStatus.Connecting;\n}\n","import { isSignInWithEmailLink, signInWithEmailLink, User } from 'firebase/auth';\nimport { FormEventHandler, useEffect, useState } from 'react';\nimport { useAuth, defaultAuthSettings } from '../Auth';\nimport { SubmitHandler, useForm } from 'react-hook-form';\nimport { useRouter } from 'next/router';\nimport { useLocalGet, useLocalSet } from '../Store';\n\nexport enum FirestarterVerifyStatus {\n  Connecting,\n  Inputing,\n  Submitting,\n  Waiting,\n  Redirecting,\n  LinkError,\n}\n\nexport type FirestarterVerifyState = {\n  status: FirestarterVerifyStatus;\n  errors: any;\n  currentUser: User | null;\n  registerEmail: any;\n  submitHandler: FormEventHandler<HTMLFormElement>;\n  watchEmail: string;\n  stopWaiting: () => void;\n};\n\nexport type FirestarterVerifyInputs = {\n  link: string;\n  email: string;\n};\n\nexport function useVerify(): FirestarterVerifyState {\n  const router = useRouter();\n  const { currentUser, connected, settings, auth } = useAuth();\n  const [waiting, setWaiting] = useState(true); // Start in waiting state whilst we verify the url\n  const getEmailForLogin = useLocalGet('emailForLogin');\n  const setEmailForLogin = useLocalSet('emailForLogin');\n\n  const {\n    register,\n    handleSubmit,\n    watch,\n    setError,\n    formState: { errors, isSubmitting },\n  } = useForm<FirestarterVerifyInputs>();\n\n  const onSubmit: SubmitHandler<FirestarterVerifyInputs> = ({ email }) => {\n    if (auth) {\n      console.log('Signing in with email link');\n      return signInWithEmailLink(auth, email, location.href)\n        .then(() => {\n          setWaiting(true);\n          setEmailForLogin(null);\n        })\n        .catch((error) => {\n          console.error(error);\n          setError('email', { type: 'verify.invalidEmail', message: 'There was an error, check your email and try again.' });\n        });\n    }\n  };\n\n  useEffect(() => {\n    // signInWithEmailLink invalidates link once used and fails if run multiple times\n    // if running in strict development mode effect runs twice\n    // so wait until auth is ready and we dont have a user\n    if (auth && connected && !currentUser) {\n      console.info('Verify email link');\n      if (isSignInWithEmailLink(auth, location.href)) {\n        const email = getEmailForLogin();\n\n        if (email) {\n          signInWithEmailLink(auth, email, location.href)\n            .then(() => {\n              // Auth will automatically update users so just set to waiting until we detect it\n              setWaiting(true);\n              setEmailForLogin(null);\n            })\n            .catch((error) => {\n              setError('link', { type: 'verify.invalidLink', message: 'There was an error, provide your email and try again.' });\n              console.error(error);\n            });\n        } else {\n          // No email in storage so show the form\n          setWaiting(false);\n        }\n      } else {\n        setWaiting(false);\n        setError('link', { type: 'verify.badLink', message: 'There was an error with your verification link.' });\n      }\n    }\n  }, [currentUser, connected, auth, setError, setEmailForLogin, getEmailForLogin]);\n\n  // If user is authenticated, redirect to the user page\n  useEffect(() => {\n    if (currentUser) {\n      router.replace(settings.userPath || defaultAuthSettings.userPath);\n    }\n  }, [currentUser, router, settings.userPath]);\n\n  // Calculate status depending on other states\n  const status = !connected\n    ? FirestarterVerifyStatus.Connecting\n    : currentUser\n    ? FirestarterVerifyStatus.Redirecting\n    : waiting\n    ? FirestarterVerifyStatus.Waiting\n    : isSubmitting\n    ? FirestarterVerifyStatus.Submitting\n    : errors.link\n    ? FirestarterVerifyStatus.LinkError\n    : FirestarterVerifyStatus.Inputing;\n\n  return {\n    status,\n    errors,\n    currentUser,\n    registerEmail: register('email', { required: 'Required' }),\n    submitHandler: handleSubmit(onSubmit),\n    watchEmail: watch('email') || getEmailForLogin(),\n    stopWaiting: () => setWaiting(false),\n  };\n}\n","import { DocumentReference, DocumentSnapshot, onSnapshot, refEqual, SnapshotListenOptions } from 'firebase/firestore';\nimport { useEffect, useState } from 'react';\nimport useMemoState from './useMemoState';\n\nexport default function useDocumentSnapshot(docRef: DocumentReference | null, options?: SnapshotListenOptions): DocumentSnapshot<unknown> | null {\n  // You really should not be sending in mutating objects but handle them if they are\n  const docMemo = useMemoState(docRef, refEqual);\n  const optionsMemo: SnapshotListenOptions = useMemoState(options);\n\n  const [snapshot, setSnapshot] = useState<DocumentSnapshot<unknown> | null>(null);\n\n  useEffect(() => {\n    if (docMemo) {\n      const unsubscribe = onSnapshot(\n        docMemo,\n        optionsMemo || {},\n        (snapshot) => {\n          setSnapshot(snapshot);\n        },\n        (error) => {\n          console.error(error);\n          throw error;\n        }\n      );\n      return () => {\n        unsubscribe();\n      };\n    } else {\n      setSnapshot(null);\n    }\n  }, [docMemo, optionsMemo]);\n\n  return snapshot;\n}\n","import { useEffect, useState } from 'react';\nimport deepEqual from 'fast-deep-equal/es6/react';\n\n/**\n * You really should not be using mutating objects but handle them if they are\n * @param {any} state\n * @param {(a: any, b: any) => boolean} [compareFn]\n *\n * @returns {any}\n */\nexport default function useMemoState(state: any, compareFn = deepEqual, warn = false): any {\n  const [cachedState, setCachedState] = useState(state);\n  useEffect(() => {\n    if ((!state || !cachedState) && state !== cachedState) {\n      setCachedState(state);\n    } else if (!compareFn(state, cachedState)) {\n      setCachedState(state);\n    } else if (state !== cachedState) {\n      // Warn that identical mutating state was provided\n      if (warn) {\n        console.warn('Mutating State', state, cachedState);\n      }\n    }\n  }, [state, cachedState, compareFn, warn]);\n\n  return cachedState;\n}\n","import { onSnapshot, Query, queryEqual, QuerySnapshot, SnapshotListenOptions } from 'firebase/firestore';\nimport { useEffect, useState } from 'react';\nimport useMemoState from './useMemoState';\n\nexport default function useQuerySnapshot(query: Query, options?: SnapshotListenOptions): QuerySnapshot | null {\n  // You really should not be sending in mutating objects but handle them if they are\n  const queryMemo: Query = useMemoState(query, queryEqual);\n  const optionsMemo: SnapshotListenOptions = useMemoState(options);\n\n  const [snapshot, setSnapshot] = useState<QuerySnapshot | null>(null);\n\n  useEffect(() => {\n    if (queryMemo) {\n      const unsubscribe = onSnapshot(\n        queryMemo,\n        optionsMemo || {},\n        (snapshot) => {\n          setSnapshot(snapshot);\n        },\n        (error) => {\n          console.error(error);\n          throw error;\n        }\n      );\n      return unsubscribe;\n    } else {\n      setSnapshot(null);\n    }\n  }, [optionsMemo, queryMemo]);\n\n  return snapshot;\n}\n"],"names":[],"version":3,"file":"module.js.map","sourceRoot":"../"}